import{r as o,p as T,b as D,j as e,a as n,D as Z,a1 as p,a8 as ee,a9 as te}from"./index-DrBwAU1T.js";import{C as g,a as h,b as S,c as N}from"./card-Cmu1fk5m.js";import{B as P}from"./badge-BVkw5bJj.js";import{B}from"./book-open-BQfJsvX3.js";import{P as se}from"./plus-B8Ewa_Kr.js";import{P as ie}from"./pen-BV3r-nQd.js";import{T as ne}from"./trash-2-CxXCVqKn.js";const re=[{code:"1000",name:"Cash",type:"Asset",subtype:"Current Asset",description:"Cash on hand and in bank accounts",isActive:!0},{code:"1010",name:"Petty Cash",type:"Asset",subtype:"Current Asset",description:"Small cash fund for minor expenses",isActive:!0},{code:"1100",name:"Accounts Receivable",type:"Asset",subtype:"Current Asset",description:"Money owed by customers",isActive:!0},{code:"1200",name:"Inventory",type:"Asset",subtype:"Current Asset",description:"Goods available for sale",isActive:!0},{code:"1300",name:"Prepaid Expenses",type:"Asset",subtype:"Current Asset",description:"Expenses paid in advance",isActive:!0},{code:"1400",name:"Prepaid Insurance",type:"Asset",subtype:"Current Asset",description:"Insurance premiums paid in advance",isActive:!0},{code:"1500",name:"Equipment",type:"Asset",subtype:"Fixed Asset",description:"Office and business equipment",isActive:!0},{code:"1510",name:"Accumulated Depreciation - Equipment",type:"Asset",subtype:"Fixed Asset",description:"Accumulated depreciation on equipment",isActive:!0},{code:"1600",name:"Furniture & Fixtures",type:"Asset",subtype:"Fixed Asset",description:"Office furniture and fixtures",isActive:!0},{code:"1610",name:"Accumulated Depreciation - Furniture",type:"Asset",subtype:"Fixed Asset",description:"Accumulated depreciation on furniture",isActive:!0},{code:"1700",name:"Vehicles",type:"Asset",subtype:"Fixed Asset",description:"Company vehicles",isActive:!0},{code:"1710",name:"Accumulated Depreciation - Vehicles",type:"Asset",subtype:"Fixed Asset",description:"Accumulated depreciation on vehicles",isActive:!0},{code:"2000",name:"Accounts Payable",type:"Liability",subtype:"Current Liability",description:"Money owed to suppliers",isActive:!0},{code:"2100",name:"Accrued Expenses",type:"Liability",subtype:"Current Liability",description:"Expenses incurred but not yet paid",isActive:!0},{code:"2200",name:"Unearned Revenue",type:"Liability",subtype:"Current Liability",description:"Payments received for future services",isActive:!0},{code:"2300",name:"Notes Payable - Short Term",type:"Liability",subtype:"Current Liability",description:"Short-term loans and notes",isActive:!0},{code:"2400",name:"Credit Card Payable",type:"Liability",subtype:"Current Liability",description:"Credit card balances owed",isActive:!0},{code:"2500",name:"Payroll Liabilities",type:"Liability",subtype:"Current Liability",description:"Wages and taxes payable",isActive:!0},{code:"2600",name:"Sales Tax Payable",type:"Liability",subtype:"Current Liability",description:"Sales tax collected from customers",isActive:!0},{code:"2700",name:"Notes Payable - Long Term",type:"Liability",subtype:"Long-term Liability",description:"Long-term loans and notes",isActive:!0},{code:"3000",name:"Owner's Equity",type:"Equity",subtype:"Equity",description:"Owner's investment in the business",isActive:!0},{code:"3100",name:"Retained Earnings",type:"Equity",subtype:"Equity",description:"Accumulated profits retained in business",isActive:!0},{code:"3200",name:"Dividends",type:"Equity",subtype:"Equity",description:"Distributions to owners",isActive:!0},{code:"4000",name:"Sales Revenue",type:"Revenue",subtype:"Operating Revenue",description:"Revenue from product sales",isActive:!0},{code:"4100",name:"Service Revenue",type:"Revenue",subtype:"Operating Revenue",description:"Revenue from services provided",isActive:!0},{code:"4200",name:"Interest Income",type:"Revenue",subtype:"Non-operating Revenue",description:"Interest earned on investments",isActive:!0},{code:"4300",name:"Other Income",type:"Revenue",subtype:"Non-operating Revenue",description:"Miscellaneous income",isActive:!0},{code:"5000",name:"Cost of Goods Sold",type:"Expense",subtype:"Cost of Sales",description:"Direct costs of producing goods sold",isActive:!0},{code:"6000",name:"Salaries & Wages",type:"Expense",subtype:"Operating Expense",description:"Employee compensation",isActive:!0},{code:"6100",name:"Rent Expense",type:"Expense",subtype:"Operating Expense",description:"Office and facility rent",isActive:!0},{code:"6200",name:"Depreciation Expense",type:"Expense",subtype:"Operating Expense",description:"Depreciation of fixed assets",isActive:!0},{code:"6300",name:"Insurance Expense",type:"Expense",subtype:"Operating Expense",description:"Business insurance costs",isActive:!0},{code:"6400",name:"Utilities Expense",type:"Expense",subtype:"Operating Expense",description:"Electricity, water, gas, internet",isActive:!0},{code:"6500",name:"Office Supplies Expense",type:"Expense",subtype:"Operating Expense",description:"Office supplies and materials",isActive:!0},{code:"6600",name:"Professional Fees",type:"Expense",subtype:"Operating Expense",description:"Legal, accounting, consulting fees",isActive:!0},{code:"6700",name:"Marketing & Advertising",type:"Expense",subtype:"Operating Expense",description:"Marketing and advertising costs",isActive:!0},{code:"6800",name:"Travel & Entertainment",type:"Expense",subtype:"Operating Expense",description:"Business travel and entertainment",isActive:!0},{code:"6900",name:"Interest Expense",type:"Expense",subtype:"Operating Expense",description:"Interest paid on loans",isActive:!0},{code:"6950",name:"Bank Fees",type:"Expense",subtype:"Operating Expense",description:"Banking service charges",isActive:!0}],ae=[{code:"1000",name:"Operating Cash Account",type:"Asset",subtype:"Current Asset",description:"Main business checking account",isActive:!0},{code:"1050",name:"Client Trust Account",type:"Asset",subtype:"Current Asset",description:"Client funds held in trust",isActive:!0},{code:"1100",name:"Accounts Receivable",type:"Asset",subtype:"Current Asset",description:"Unbilled services and outstanding invoices",isActive:!0},{code:"1150",name:"Retainer Receivable",type:"Asset",subtype:"Current Asset",description:"Client retainers and prepayments",isActive:!0},{code:"1300",name:"Prepaid Expenses",type:"Asset",subtype:"Current Asset",description:"Prepaid insurance, rent, licenses",isActive:!0},{code:"1500",name:"Computer Equipment",type:"Asset",subtype:"Fixed Asset",description:"Computers, servers, IT equipment",isActive:!0},{code:"1510",name:"Accumulated Depreciation - Equipment",type:"Asset",subtype:"Fixed Asset",description:"Depreciation on equipment",isActive:!0},{code:"1600",name:"Office Furniture",type:"Asset",subtype:"Fixed Asset",description:"Desks, chairs, conference tables",isActive:!0},{code:"1800",name:"Leasehold Improvements",type:"Asset",subtype:"Fixed Asset",description:"Office renovations and improvements",isActive:!0},{code:"2000",name:"Accounts Payable",type:"Liability",subtype:"Current Liability",description:"Vendor invoices payable",isActive:!0},{code:"2050",name:"Client Trust Liability",type:"Liability",subtype:"Current Liability",description:"Client funds held in trust",isActive:!0},{code:"2200",name:"Deferred Revenue",type:"Liability",subtype:"Current Liability",description:"Retainers and advance payments",isActive:!0},{code:"2500",name:"Payroll Liabilities",type:"Liability",subtype:"Current Liability",description:"Wages, taxes, benefits payable",isActive:!0},{code:"2600",name:"Professional Liability Insurance Payable",type:"Liability",subtype:"Current Liability",description:"Malpractice insurance payable",isActive:!0},{code:"3000",name:"Partners Capital",type:"Equity",subtype:"Equity",description:"Partner ownership accounts",isActive:!0},{code:"3100",name:"Retained Earnings",type:"Equity",subtype:"Equity",description:"Accumulated earnings",isActive:!0},{code:"3200",name:"Partner Distributions",type:"Equity",subtype:"Equity",description:"Distributions to partners",isActive:!0},{code:"4000",name:"Professional Fees - Billable Hours",type:"Revenue",subtype:"Operating Revenue",description:"Hourly billing revenue",isActive:!0},{code:"4100",name:"Project Fees - Fixed Price",type:"Revenue",subtype:"Operating Revenue",description:"Fixed-fee project revenue",isActive:!0},{code:"4200",name:"Retainer Fees",type:"Revenue",subtype:"Operating Revenue",description:"Monthly retainer revenue",isActive:!0},{code:"4300",name:"Success Fees",type:"Revenue",subtype:"Operating Revenue",description:"Performance-based fees",isActive:!0},{code:"4400",name:"Reimbursable Expenses",type:"Revenue",subtype:"Operating Revenue",description:"Client expense reimbursements",isActive:!0},{code:"6000",name:"Professional Salaries",type:"Expense",subtype:"Operating Expense",description:"Partner and associate salaries",isActive:!0},{code:"6050",name:"Support Staff Salaries",type:"Expense",subtype:"Operating Expense",description:"Administrative staff salaries",isActive:!0},{code:"6100",name:"Office Rent",type:"Expense",subtype:"Operating Expense",description:"Office space rental",isActive:!0},{code:"6200",name:"Professional Development",type:"Expense",subtype:"Operating Expense",description:"Training, certifications, conferences",isActive:!0},{code:"6250",name:"Professional Liability Insurance",type:"Expense",subtype:"Operating Expense",description:"Malpractice and E&O insurance",isActive:!0},{code:"6300",name:"Software Subscriptions",type:"Expense",subtype:"Operating Expense",description:"Practice management, research tools",isActive:!0},{code:"6400",name:"Legal Research & Subscriptions",type:"Expense",subtype:"Operating Expense",description:"Legal databases and publications",isActive:!0},{code:"6500",name:"Client Development",type:"Expense",subtype:"Operating Expense",description:"Business development and networking",isActive:!0},{code:"6600",name:"Outsourced Services",type:"Expense",subtype:"Operating Expense",description:"Contract professionals and specialists",isActive:!0},{code:"6700",name:"Travel - Client Related",type:"Expense",subtype:"Operating Expense",description:"Client meeting travel expenses",isActive:!0}],ce=[{code:"1000",name:"Cash - Main Account",type:"Asset",subtype:"Current Asset",description:"Primary checking account",isActive:!0},{code:"1020",name:"Cash - Payment Processor",type:"Asset",subtype:"Current Asset",description:"Stripe, PayPal, Square balances",isActive:!0},{code:"1100",name:"Accounts Receivable",type:"Asset",subtype:"Current Asset",description:"B2B customer invoices",isActive:!0},{code:"1200",name:"Inventory - Finished Goods",type:"Asset",subtype:"Current Asset",description:"Products ready for sale",isActive:!0},{code:"1250",name:"Inventory - In Transit",type:"Asset",subtype:"Current Asset",description:"Inventory being shipped to warehouse",isActive:!0},{code:"1300",name:"Prepaid Inventory",type:"Asset",subtype:"Current Asset",description:"Deposits on inventory orders",isActive:!0},{code:"1500",name:"Store Fixtures & Equipment",type:"Asset",subtype:"Fixed Asset",description:"Shelving, displays, POS systems",isActive:!0},{code:"1510",name:"Accumulated Depreciation - Fixtures",type:"Asset",subtype:"Fixed Asset",description:"Depreciation on fixtures",isActive:!0},{code:"1600",name:"Leasehold Improvements",type:"Asset",subtype:"Fixed Asset",description:"Store build-out and renovations",isActive:!0},{code:"2000",name:"Accounts Payable - Inventory",type:"Liability",subtype:"Current Liability",description:"Supplier invoices for inventory",isActive:!0},{code:"2050",name:"Accounts Payable - Operating",type:"Liability",subtype:"Current Liability",description:"Operating expense payables",isActive:!0},{code:"2100",name:"Sales Tax Payable",type:"Liability",subtype:"Current Liability",description:"Sales tax collected",isActive:!0},{code:"2200",name:"Customer Deposits",type:"Liability",subtype:"Current Liability",description:"Prepayments and layaways",isActive:!0},{code:"2300",name:"Gift Card Liability",type:"Liability",subtype:"Current Liability",description:"Outstanding gift card balances",isActive:!0},{code:"2400",name:"Returns & Refunds Payable",type:"Liability",subtype:"Current Liability",description:"Pending customer refunds",isActive:!0},{code:"2500",name:"Merchant Processing Fees Payable",type:"Liability",subtype:"Current Liability",description:"Payment processor fees",isActive:!0},{code:"3000",name:"Owner's Equity",type:"Equity",subtype:"Equity",description:"Owner investment",isActive:!0},{code:"3100",name:"Retained Earnings",type:"Equity",subtype:"Equity",description:"Accumulated profits",isActive:!0},{code:"4000",name:"Retail Sales - In Store",type:"Revenue",subtype:"Operating Revenue",description:"Physical store sales",isActive:!0},{code:"4100",name:"Online Sales",type:"Revenue",subtype:"Operating Revenue",description:"E-commerce website sales",isActive:!0},{code:"4200",name:"Wholesale Sales",type:"Revenue",subtype:"Operating Revenue",description:"B2B bulk sales",isActive:!0},{code:"4300",name:"Shipping & Handling Revenue",type:"Revenue",subtype:"Operating Revenue",description:"Shipping fees collected",isActive:!0},{code:"4900",name:"Sales Returns & Allowances",type:"Revenue",subtype:"Operating Revenue",description:"Product returns (contra-revenue)",isActive:!0},{code:"4950",name:"Sales Discounts",type:"Revenue",subtype:"Operating Revenue",description:"Promotional discounts (contra-revenue)",isActive:!0},{code:"5000",name:"Cost of Goods Sold",type:"Expense",subtype:"Cost of Sales",description:"Product costs",isActive:!0},{code:"5100",name:"Freight & Shipping - Inbound",type:"Expense",subtype:"Cost of Sales",description:"Inbound shipping costs",isActive:!0},{code:"5200",name:"Inventory Shrinkage",type:"Expense",subtype:"Cost of Sales",description:"Theft, damage, obsolescence",isActive:!0},{code:"6000",name:"Store Rent",type:"Expense",subtype:"Operating Expense",description:"Retail space rent",isActive:!0},{code:"6100",name:"Sales Staff Wages",type:"Expense",subtype:"Operating Expense",description:"Sales associate payroll",isActive:!0},{code:"6200",name:"Merchant Processing Fees",type:"Expense",subtype:"Operating Expense",description:"Credit card processing fees",isActive:!0},{code:"6300",name:"E-commerce Platform Fees",type:"Expense",subtype:"Operating Expense",description:"Shopify, WooCommerce, etc.",isActive:!0},{code:"6400",name:"Marketing & Advertising",type:"Expense",subtype:"Operating Expense",description:"Advertising campaigns",isActive:!0},{code:"6500",name:"Packaging Supplies",type:"Expense",subtype:"Operating Expense",description:"Boxes, bags, tissue paper",isActive:!0},{code:"6600",name:"Shipping & Fulfillment - Outbound",type:"Expense",subtype:"Operating Expense",description:"Customer shipping costs",isActive:!0},{code:"6700",name:"Warehouse & Storage",type:"Expense",subtype:"Operating Expense",description:"3PL and storage fees",isActive:!0}],oe=[{code:"1000",name:"Operating Cash",type:"Asset",subtype:"Current Asset",description:"Main operating account",isActive:!0},{code:"1050",name:"Security Deposits Held",type:"Asset",subtype:"Current Asset",description:"Tenant security deposits",isActive:!0},{code:"1100",name:"Rent Receivable",type:"Asset",subtype:"Current Asset",description:"Outstanding rent payments",isActive:!0},{code:"1500",name:"Land",type:"Asset",subtype:"Fixed Asset",description:"Land holdings",isActive:!0},{code:"1600",name:"Buildings & Improvements",type:"Asset",subtype:"Fixed Asset",description:"Property structures",isActive:!0},{code:"1610",name:"Accumulated Depreciation - Buildings",type:"Asset",subtype:"Fixed Asset",description:"Building depreciation",isActive:!0},{code:"1700",name:"Rental Property - Residential",type:"Asset",subtype:"Fixed Asset",description:"Residential rental properties",isActive:!0},{code:"1800",name:"Rental Property - Commercial",type:"Asset",subtype:"Fixed Asset",description:"Commercial rental properties",isActive:!0},{code:"2000",name:"Accounts Payable",type:"Liability",subtype:"Current Liability",description:"Operating payables",isActive:!0},{code:"2050",name:"Security Deposits Liability",type:"Liability",subtype:"Current Liability",description:"Tenant deposits held",isActive:!0},{code:"2100",name:"Prepaid Rent Liability",type:"Liability",subtype:"Current Liability",description:"Rent collected in advance",isActive:!0},{code:"2200",name:"Property Tax Payable",type:"Liability",subtype:"Current Liability",description:"Property taxes owed",isActive:!0},{code:"2700",name:"Mortgage Payable",type:"Liability",subtype:"Long-term Liability",description:"Property mortgages",isActive:!0},{code:"3000",name:"Owner's Equity",type:"Equity",subtype:"Equity",description:"Owner capital",isActive:!0},{code:"3100",name:"Retained Earnings",type:"Equity",subtype:"Equity",description:"Accumulated earnings",isActive:!0},{code:"4000",name:"Rental Income - Residential",type:"Revenue",subtype:"Operating Revenue",description:"Residential rent collected",isActive:!0},{code:"4100",name:"Rental Income - Commercial",type:"Revenue",subtype:"Operating Revenue",description:"Commercial rent collected",isActive:!0},{code:"4200",name:"Late Fees",type:"Revenue",subtype:"Operating Revenue",description:"Late payment fees",isActive:!0},{code:"4300",name:"Pet Fees",type:"Revenue",subtype:"Operating Revenue",description:"Pet rent and deposits",isActive:!0},{code:"4400",name:"Parking Fees",type:"Revenue",subtype:"Operating Revenue",description:"Parking space rental",isActive:!0},{code:"6000",name:"Property Management Fees",type:"Expense",subtype:"Operating Expense",description:"Management company fees",isActive:!0},{code:"6100",name:"Repairs & Maintenance",type:"Expense",subtype:"Operating Expense",description:"Property upkeep and repairs",isActive:!0},{code:"6200",name:"Property Tax Expense",type:"Expense",subtype:"Operating Expense",description:"Annual property taxes",isActive:!0},{code:"6300",name:"Property Insurance",type:"Expense",subtype:"Operating Expense",description:"Property insurance premiums",isActive:!0},{code:"6400",name:"Utilities - Owner Paid",type:"Expense",subtype:"Operating Expense",description:"Utilities paid by owner",isActive:!0},{code:"6500",name:"HOA Fees",type:"Expense",subtype:"Operating Expense",description:"Homeowners association fees",isActive:!0},{code:"6600",name:"Landscaping & Grounds",type:"Expense",subtype:"Operating Expense",description:"Lawn care and landscaping",isActive:!0},{code:"6700",name:"Snow Removal",type:"Expense",subtype:"Operating Expense",description:"Winter maintenance",isActive:!0},{code:"6800",name:"Mortgage Interest Expense",type:"Expense",subtype:"Operating Expense",description:"Interest on property loans",isActive:!0},{code:"6900",name:"Depreciation Expense",type:"Expense",subtype:"Operating Expense",description:"Building depreciation",isActive:!0}],pe=[{code:"1000",name:"Operating Cash",type:"Asset",subtype:"Current Asset",description:"Main bank account",isActive:!0},{code:"1020",name:"Payment Processor Balance",type:"Asset",subtype:"Current Asset",description:"Stripe/PayPal balance",isActive:!0},{code:"1100",name:"Accounts Receivable",type:"Asset",subtype:"Current Asset",description:"Enterprise customer invoices",isActive:!0},{code:"1500",name:"Computer Equipment",type:"Asset",subtype:"Fixed Asset",description:"Servers and hardware",isActive:!0},{code:"1600",name:"Software Development Costs",type:"Asset",subtype:"Intangible Asset",description:"Capitalized development",isActive:!0},{code:"2000",name:"Accounts Payable",type:"Liability",subtype:"Current Liability",description:"Vendor bills",isActive:!0},{code:"2100",name:"Deferred Revenue - Monthly",type:"Liability",subtype:"Current Liability",description:"Monthly subscriptions prepaid",isActive:!0},{code:"2150",name:"Deferred Revenue - Annual",type:"Liability",subtype:"Current Liability",description:"Annual subscriptions prepaid",isActive:!0},{code:"2200",name:"Customer Credits",type:"Liability",subtype:"Current Liability",description:"Account credits and refunds",isActive:!0},{code:"3000",name:"Common Stock",type:"Equity",subtype:"Equity",description:"Shareholder equity",isActive:!0},{code:"3100",name:"Retained Earnings",type:"Equity",subtype:"Equity",description:"Accumulated profits",isActive:!0},{code:"4000",name:"Subscription Revenue - Monthly",type:"Revenue",subtype:"Operating Revenue",description:"Monthly recurring revenue",isActive:!0},{code:"4100",name:"Subscription Revenue - Annual",type:"Revenue",subtype:"Operating Revenue",description:"Annual recurring revenue",isActive:!0},{code:"4200",name:"Professional Services Revenue",type:"Revenue",subtype:"Operating Revenue",description:"Implementation and consulting",isActive:!0},{code:"4300",name:"Usage-Based Revenue",type:"Revenue",subtype:"Operating Revenue",description:"Overage and usage fees",isActive:!0},{code:"5000",name:"Cloud Hosting - AWS/GCP",type:"Expense",subtype:"Cost of Revenue",description:"Infrastructure costs",isActive:!0},{code:"5100",name:"Third-Party API Costs",type:"Expense",subtype:"Cost of Revenue",description:"External API usage",isActive:!0},{code:"5200",name:"Payment Processing Fees",type:"Expense",subtype:"Cost of Revenue",description:"Stripe/PayPal fees",isActive:!0},{code:"6000",name:"Engineering Salaries",type:"Expense",subtype:"Operating Expense",description:"Development team payroll",isActive:!0},{code:"6100",name:"Product & Design Salaries",type:"Expense",subtype:"Operating Expense",description:"Product team payroll",isActive:!0},{code:"6200",name:"Sales & Marketing Salaries",type:"Expense",subtype:"Operating Expense",description:"GTM team payroll",isActive:!0},{code:"6300",name:"Software Subscriptions",type:"Expense",subtype:"Operating Expense",description:"Tools and SaaS platforms",isActive:!0},{code:"6400",name:"Paid Advertising",type:"Expense",subtype:"Operating Expense",description:"Google Ads, Facebook Ads",isActive:!0},{code:"6500",name:"Customer Support Costs",type:"Expense",subtype:"Operating Expense",description:"Support tools and staffing",isActive:!0}],M={"general-business":{name:"General Business",description:"Standard chart of accounts suitable for most businesses",accounts:re},"professional-services":{name:"Professional Services",description:"For consulting firms, law firms, accounting practices",accounts:ae},retail:{name:"Retail / E-commerce",description:"For retail stores, online shops, and e-commerce businesses",accounts:ce},"real-estate":{name:"Real Estate",description:"For property management and real estate investment",accounts:oe},saas:{name:"SaaS / Technology",description:"For software companies and subscription businesses",accounts:pe}};function be({companyId:C,companyName:j}){const[c,w]=o.useState([]),[z,F]=o.useState(!0),[k,R]=o.useState(null),[r,y]=o.useState(null),[_,O]=o.useState(!1),[a,m]=o.useState({code:"",name:"",type:"Expense",subtype:"",description:"",isActive:!0}),[u,v]=o.useState("all"),[E,$]=o.useState(""),[q,L]=o.useState(!1);o.useEffect(()=>{G()},[C]);const G=async()=>{try{F(!0);const t=await fetch(`https://${T}.supabase.co/functions/v1/make-server-53c2e113/companies/${C}/coa`,{headers:{Authorization:`Bearer ${D}`}});if(t.ok){const s=await t.json();w(s.accounts||[])}}catch(t){console.error("Failed to load chart of accounts:",t)}finally{F(!1)}},x=async t=>{try{if(!(await fetch(`https://${T}.supabase.co/functions/v1/make-server-53c2e113/companies/${C}/coa`,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({accounts:t})})).ok)throw new Error("Failed to save chart of accounts");return w(t),!0}catch(s){return console.error("Failed to save COA:",s),alert("Failed to save changes. Please try again."),!1}},U=async t=>{const s=M[t];if(!s||!confirm(`Load ${s.name} template?

This will replace your current chart of accounts with ${s.accounts.length} accounts.`))return;await x(s.accounts)&&(L(!1),alert(`${s.name} template loaded successfully!`))},W=async()=>{if(!a.code||!a.name){alert("Please enter both account code and name.");return}if(c.some(i=>i.code===a.code)){alert("An account with this code already exists.");return}const t=[...c,{...a}];await x(t)&&(O(!1),m({code:"",name:"",type:"Expense",subtype:"",description:"",isActive:!0}))},H=t=>{R(t.code),y({...t})},V=async()=>{if(!r)return;const t=c.map(i=>i.code===k?r:i);await x(t)&&(R(null),y(null))},Q=async t=>{if(!confirm("Are you sure you want to delete this account?"))return;const i=c.filter(f=>f.code!==t);await x(i)},J=async t=>{const s=c.map(i=>i.code===t?{...i,isActive:!i.isActive}:i);await x(s)},K=()=>{const t=["Code","Name","Type","Subtype","Description","Status"],s=c.map(l=>[l.code,l.name,l.type,l.subtype||"",l.description||"",l.isActive?"Active":"Inactive"]),i=[t.join(","),...s.map(l=>l.map(Y=>`"${Y}"`).join(","))].join(`
`),f=new Blob([i],{type:"text/csv"}),I=window.URL.createObjectURL(f),A=document.createElement("a");A.href=I,A.download=`${j}_Chart_of_Accounts_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),window.URL.revokeObjectURL(I),document.body.removeChild(A)},d=c.filter(t=>{const s=u==="all"||t.type===u,i=t.code.toLowerCase().includes(E.toLowerCase())||t.name.toLowerCase().includes(E.toLowerCase())||t.description&&t.description.toLowerCase().includes(E.toLowerCase());return s&&i}),b={Asset:d.filter(t=>t.type==="Asset"),Liability:d.filter(t=>t.type==="Liability"),Equity:d.filter(t=>t.type==="Equity"),Revenue:d.filter(t=>t.type==="Revenue"),Expense:d.filter(t=>t.type==="Expense")},X=t=>{switch(t){case"Asset":return"bg-blue-100 text-blue-700";case"Liability":return"bg-red-100 text-red-700";case"Equity":return"bg-purple-100 text-purple-700";case"Revenue":return"bg-green-100 text-green-700";case"Expense":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};return z?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl text-gray-900",children:"Chart of Accounts"}),e.jsx("p",{className:"text-gray-500 mt-1",children:j})]})}),e.jsx(g,{children:e.jsx(h,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-purple-600 border-t-transparent mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Loading chart of accounts..."})]})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl text-gray-900",children:"Chart of Accounts"}),e.jsx("p",{className:"text-gray-500 mt-1",children:j})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(n,{variant:"outline",onClick:K,className:"gap-2",children:[e.jsx(Z,{className:"size-4"}),"Export CSV"]}),e.jsxs(n,{variant:"outline",onClick:()=>L(!q),className:"gap-2",children:[e.jsx(B,{className:"size-4"}),"Templates"]}),e.jsxs(n,{onClick:()=>O(!0),className:"gap-2 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700",children:[e.jsx(se,{className:"size-4"}),"Add Account"]})]})]}),q&&e.jsxs(g,{className:"border-2 border-purple-200",children:[e.jsx(S,{children:e.jsx(N,{children:"Choose Industry Template"})}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(M).map(([t,s])=>e.jsxs("button",{onClick:()=>U(t),className:"text-left p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-colors",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.accounts.length," accounts"]})]},t))})})]}),e.jsx(g,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx(p,{placeholder:"Search accounts by code, name, or description...",value:E,onChange:t=>$(t.target.value),className:"h-10"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:u==="all"?"default":"outline",onClick:()=>v("all"),size:"sm",children:["All (",c.length,")"]}),e.jsxs(n,{variant:u==="Asset"?"default":"outline",onClick:()=>v("Asset"),size:"sm",children:["Assets (",b.Asset.length,")"]}),e.jsxs(n,{variant:u==="Liability"?"default":"outline",onClick:()=>v("Liability"),size:"sm",children:["Liabilities (",b.Liability.length,")"]}),e.jsxs(n,{variant:u==="Equity"?"default":"outline",onClick:()=>v("Equity"),size:"sm",children:["Equity (",b.Equity.length,")"]}),e.jsxs(n,{variant:u==="Revenue"?"default":"outline",onClick:()=>v("Revenue"),size:"sm",children:["Revenue (",b.Revenue.length,")"]}),e.jsxs(n,{variant:u==="Expense"?"default":"outline",onClick:()=>v("Expense"),size:"sm",children:["Expenses (",b.Expense.length,")"]})]})]})})}),_&&e.jsxs(g,{className:"border-2 border-purple-200",children:[e.jsx(S,{children:e.jsx(N,{children:"Add New Account"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Account Code *"}),e.jsx(p,{value:a.code,onChange:t=>m({...a,code:t.target.value}),placeholder:"e.g., 7000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Account Name *"}),e.jsx(p,{value:a.name,onChange:t=>m({...a,name:t.target.value}),placeholder:"e.g., Custom Expense"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Type *"}),e.jsxs("select",{value:a.type,onChange:t=>m({...a,type:t.target.value}),className:"w-full h-10 px-3 border border-gray-200 rounded-md",children:[e.jsx("option",{value:"Asset",children:"Asset"}),e.jsx("option",{value:"Liability",children:"Liability"}),e.jsx("option",{value:"Equity",children:"Equity"}),e.jsx("option",{value:"Revenue",children:"Revenue"}),e.jsx("option",{value:"Expense",children:"Expense"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Subtype"}),e.jsx(p,{value:a.subtype,onChange:t=>m({...a,subtype:t.target.value}),placeholder:"e.g., Operating Expense"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Description"}),e.jsx(p,{value:a.description,onChange:t=>m({...a,description:t.target.value}),placeholder:"Optional description"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(n,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(n,{onClick:W,className:"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700",children:"Add Account"})]})]})]}),e.jsxs(g,{children:[e.jsx(S,{children:e.jsxs(N,{children:["Accounts (",d.length,")"]})}),e.jsx(h,{children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:c.length===0?"No accounts configured yet. Load a template or add accounts manually.":"No accounts match your search criteria."}),c.length===0&&e.jsxs(n,{onClick:()=>L(!0),variant:"outline",className:"gap-2",children:[e.jsx(B,{className:"size-4"}),"Load Industry Template"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Subtype"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Description"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-600 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:k===t.code&&r?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{value:r.code,disabled:!0,className:"h-8 text-sm bg-gray-100"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{value:r.name,onChange:s=>y({...r,name:s.target.value}),className:"h-8 text-sm"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("select",{value:r.type,onChange:s=>y({...r,type:s.target.value}),className:"h-8 px-2 border border-gray-200 rounded text-sm",children:[e.jsx("option",{value:"Asset",children:"Asset"}),e.jsx("option",{value:"Liability",children:"Liability"}),e.jsx("option",{value:"Equity",children:"Equity"}),e.jsx("option",{value:"Revenue",children:"Revenue"}),e.jsx("option",{value:"Expense",children:"Expense"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{value:r.subtype||"",onChange:s=>y({...r,subtype:s.target.value}),className:"h-8 text-sm"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{value:r.description||"",onChange:s=>y({...r,description:s.target.value}),className:"h-8 text-sm"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(P,{variant:r.isActive?"default":"secondary",children:r.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:V,className:"h-8 w-8 p-0 text-green-600",children:e.jsx(ee,{className:"size-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>{R(null),y(null)},className:"h-8 w-8 p-0 text-gray-400",children:e.jsx(te,{className:"size-4"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:t.code}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:t.name}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(P,{className:`text-xs ${X(t.type)}`,children:t.type})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:t.subtype||"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:t.description||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>J(t.code),className:"text-sm",children:e.jsx(P,{variant:t.isActive?"default":"secondary",className:"cursor-pointer hover:opacity-80",children:t.isActive?"Active":"Inactive"})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>H(t),className:"h-8 w-8 p-0 text-gray-400 hover:text-purple-600",children:e.jsx(ie,{className:"size-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Q(t.code),className:"h-8 w-8 p-0 text-gray-400 hover:text-red-600",children:e.jsx(ne,{className:"size-4"})})]})})]})},t.code))})]})})})]})]})}export{be as ChartOfAccountsManager};
