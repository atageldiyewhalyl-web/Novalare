import{r as c,t as o,p as f,b as N,j as e,X as Fe,C as R,F as M,a as h,D as B,d as C,U as ce,k as P,a5 as ne,W as ke}from"./index-DrBwAU1T.js";import{C as d,b as p,c as j,d as g,a as m}from"./card-Cmu1fk5m.js";import{B as ie}from"./badge-BVkw5bJj.js";import{T as Ue,a as Le,b as O,c as V}from"./tabs-B1Vb_bsc.js";import{A as Te,a as _e}from"./alert-C2ImY4gp.js";import{S as le,a as oe,b as de,c as me,d as xe}from"./select-BpfYsr0G.js";import{c as Ie}from"./api-client-BUzUkZPR.js";import{F as Ee}from"./DevPortal--LMNXygJ.js";import{B as Me}from"./building-Cu8HYSb7.js";import{B as Y}from"./book-open-BQfJsvX3.js";import{G as he}from"./git-compare-CNnYWnbh.js";import{E as ue}from"./eye-_8xTnK9v.js";import{T as pe}from"./trash-2-CxXCVqKn.js";import{C as Be}from"./circle-play-HhkG6Ukj.js";import"./index-BSRUjdZ4.js";function os(){const[D,je]=c.useState([]),[n,G]=c.useState(""),[i,J]=c.useState(""),[Pe,H]=c.useState(!0),[A,$]=c.useState([]),[y,F]=c.useState([]),[K,W]=c.useState(!1),[ge,X]=c.useState(!1),[w,k]=c.useState(null),[v,U]=c.useState([]),[q,Q]=c.useState(!1),[fe,Z]=c.useState(!1),[a,L]=c.useState(null),[ee,se]=c.useState(!1),[Oe,Ve]=c.useState(null),[T,Ne]=c.useState(!1),[Ye,Ge]=c.useState(!1),[ye,te]=c.useState("customer-statements"),[Je,He]=c.useState(!1),S=c.useRef(null),z=c.useRef(null),x=c.useRef(!0),b=s=>s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ve=()=>{const s=[],t=new Date;for(let r=0;r<12;r++){const l=new Date(t.getFullYear(),t.getMonth()-r,1),u=l.getFullYear(),I=(l.getMonth()+1).toString().padStart(2,"0"),E=`${u}-${I}`,$e=l.toLocaleDateString("en-US",{month:"long",year:"numeric"});s.push({value:E,label:$e})}return s};c.useEffect(()=>{x.current=!0,be();const s=new Date,t=s.getFullYear(),r=(s.getMonth()+1).toString().padStart(2,"0");return J(`${t}-${r}`),()=>{x.current=!1}},[]),c.useEffect(()=>{n&&i&&(_(),ae(),we())},[n,i]);const be=async()=>{try{H(!0);const s=await Ie.getAll();je(s);const t=s.find(r=>r.status==="Active");t&&G(t.id)}catch(s){console.error("Failed to load companies:",s),o.error("Failed to load companies")}finally{H(!1)}},_=async()=>{if(!(!n||!i))try{X(!0);const s=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/ar-customer-statements?companyId=${n}&period=${i}`,{headers:{Authorization:`Bearer ${N}`}});if(s.ok){const t=await s.json();x.current&&($(t.statements||[]),F(t.transactions||[]))}else s.status===404&&x.current&&($([]),F([]))}catch{x.current&&($([]),F([]))}finally{x.current&&X(!1)}},ae=async()=>{if(!(!n||!i))try{Z(!0);const s=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/ar-ledger?companyId=${n}&period=${i}`,{headers:{Authorization:`Bearer ${N}`}});if(s.ok){const t=await s.json();x.current&&(k(t.ledger||null),U(t.entries||[]))}else s.status===404&&x.current&&(k(null),U([]))}catch{x.current&&(k(null),U([]))}finally{x.current&&Z(!1)}},we=async()=>{if(!(!n||!i))try{const s=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/ar-reconciliation?companyId=${n}&period=${i}`,{headers:{Authorization:`Bearer ${N}`}});if(s.ok){const t=await s.json();x.current&&t.reconciliation&&L(t.reconciliation)}else s.status===404&&x.current&&L(null)}catch{}},Re=async s=>{const t=s.target.files?.[0];if(!(!t||!n||!i)){W(!0);try{const r=new FormData;r.append("file",t),r.append("companyId",n),r.append("period",i);const l=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/upload-customer-statement`,{method:"POST",headers:{Authorization:`Bearer ${N}`},body:r});if(l.ok){const u=await l.json();o.success(`Uploaded ${u.transactionCount} transactions from customer statement`),await _()}else{const u=await l.text();o.error("Failed to upload customer statement"),console.error(u)}}catch(r){console.error("Upload error:",r),o.error("Failed to upload customer statement")}finally{W(!1),S.current&&(S.current.value="")}}},Ce=async s=>{const t=s.target.files?.[0];if(!(!t||!n||!i)){Q(!0);try{const r=new FormData;r.append("file",t),r.append("companyId",n),r.append("period",i);const l=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/upload-ar-ledger`,{method:"POST",headers:{Authorization:`Bearer ${N}`},body:r});if(l.ok){const u=await l.json();o.success(`Uploaded ${u.entryCount} entries from AR ledger`),await ae()}else{const u=await l.text();o.error("Failed to upload AR ledger"),console.error(u)}}catch(r){console.error("Upload error:",r),o.error("Failed to upload AR ledger")}finally{Q(!1),z.current&&(z.current.value="")}}},Ae=async s=>{if(!(!n||!i))try{(await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/ar-customer-statement/${s}?companyId=${n}&period=${i}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}})).ok?(o.success("Customer statement deleted"),await _()):o.error("Failed to delete customer statement")}catch(t){console.error("Delete error:",t),o.error("Failed to delete customer statement")}},Se=async()=>{if(!(!n||!i)){if(y.length===0||v.length===0){o.error("Please upload both customer statements and AR ledger before reconciling");return}se(!0);try{const s=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/run-ar-reconciliation`,{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({companyId:n,period:i})});if(s.ok){const t=await s.json();L(t.reconciliation),o.success("AR reconciliation completed successfully"),te("reconciliation")}else{const t=await s.text();o.error("Failed to run reconciliation"),console.error(t)}}catch(s){console.error("Reconciliation error:",s),o.error("Failed to run reconciliation")}finally{se(!1)}}},ze=async()=>{if(!(!a||!n||!i))try{const s=await fetch(`https://${f}.supabase.co/functions/v1/make-server-53c2e113/export-ar-reconciliation`,{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({companyId:n,period:i,reconciliation:a})});if(s.ok){const t=await s.blob(),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r;const I=`AR_Reconciliation_${D.find(E=>E.id===n)?.name||"Company"}_${i}.xlsx`;l.download=I,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l),o.success("Reconciliation exported successfully")}else o.error("Failed to export reconciliation")}catch(s){console.error("Export error:",s),o.error("Failed to export reconciliation")}},re=ve(),De=D.find(s=>s.id===n);return e.jsxs("div",{className:"space-y-6 pb-32",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl text-gray-900",children:"AR Reconciliation"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Match customer statements with AR ledger entries using AI"})]}),e.jsxs(d,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-100",children:[e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"size-5 text-blue-600"}),e.jsx(j,{className:"text-lg",children:"Select Company & Period"})]}),e.jsx(g,{children:"Choose which company and month you're reconciling"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Company"}),e.jsxs(le,{value:n,onValueChange:G,children:[e.jsx(oe,{className:"bg-white",children:e.jsx(de,{placeholder:"Select a company"})}),e.jsx(me,{children:D.map(s=>e.jsx(xe,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"size-4 text-gray-400"}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.country,")"]})]})},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Period"}),e.jsxs(le,{value:i,onValueChange:J,children:[e.jsx(oe,{className:"bg-white",children:e.jsx(de,{placeholder:"Select period"})}),e.jsx(me,{children:re.map(s=>e.jsx(xe,{value:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"size-4 text-gray-400"}),s.label]})},s.value))})]})]})]}),n&&i&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-blue-700 bg-blue-100 px-3 py-2 rounded-lg",children:[e.jsx(R,{className:"size-4"}),e.jsxs("span",{children:["Reconciling ",e.jsx("strong",{children:De?.name})," for ",e.jsx("strong",{children:re.find(s=>s.value===i)?.label})]})]})]})]}),n&&i?e.jsxs(Ue,{value:ye,onValueChange:te,children:[e.jsxs(Le,{className:"grid w-full grid-cols-3 h-auto p-1",children:[e.jsxs(O,{value:"customer-statements",className:"gap-2 py-3",children:[e.jsx(M,{className:"size-4"}),"Customer Statements",A.length>0&&e.jsx(ie,{variant:"secondary",className:"ml-1",children:A.length})]}),e.jsxs(O,{value:"ar-ledger",className:"gap-2 py-3",children:[e.jsx(Y,{className:"size-4"}),"AR Ledger",w&&e.jsx(R,{className:"size-4 text-green-600 ml-1"})]}),e.jsxs(O,{value:"reconciliation",className:"gap-2 py-3",children:[e.jsx(he,{className:"size-4"}),"Reconciliation"]})]}),e.jsxs(V,{value:"customer-statements",className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Upload Customer Statements"}),e.jsx(g,{children:"Upload PDFs, CSV, or Excel files – AI will automatically extract all transactions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",className:"gap-2",disabled:y.length===0,children:[e.jsx(B,{className:"size-4"}),"Export"]}),e.jsx(h,{className:"gap-2",onClick:()=>S.current?.click(),disabled:K,children:K?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"size-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"size-4"}),"Upload Statement"]})}),e.jsx("input",{ref:S,type:"file",accept:".pdf,.csv,.xlsx,.xls",onChange:Re,className:"hidden"})]})]})}),e.jsx(m,{children:ge?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"size-8 animate-spin text-purple-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Loading customer statements..."})]}):A.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(M,{className:"size-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"No customer statements uploaded yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Upload your first customer statement to get started."})]}):e.jsx("div",{className:"space-y-4",children:A.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-purple-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(M,{className:"size-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.fileName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.transactionCount," transactions • ",new Date(s.uploadedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-2",children:[e.jsx(ue,{className:"size-4"}),"View"]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-2 text-red-600 hover:text-red-700",onClick:()=>Ae(s.id),children:[e.jsx(pe,{className:"size-4"}),"Delete"]})]})]},s.id))})})]}),y.length>0&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(j,{children:"All Customer Transactions"}),e.jsxs(g,{children:[y.length," transactions"]})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 pb-2 border-b border-gray-200 text-xs text-gray-500 sticky top-0 bg-white",children:[e.jsx("div",{children:"Date"}),e.jsx("div",{className:"col-span-2",children:"Description"}),e.jsx("div",{className:"text-right",children:"Amount"}),e.jsx("div",{className:"text-right",children:"Statement"})]}),y.map(s=>e.jsxs("div",{className:"grid grid-cols-5 gap-4 py-2 text-sm border-b border-gray-100",children:[e.jsx("div",{className:"text-gray-900",children:s.date}),e.jsx("div",{className:"col-span-2 text-gray-900 truncate",children:s.description}),e.jsxs("div",{className:`text-right ${s.amount>=0?"text-green-600":"text-red-600"}`,children:["€",b(Math.abs(s.amount))]}),e.jsx("div",{className:"text-right text-gray-500 text-xs truncate",children:s.statementName})]},s.id))]})})]})]}),e.jsxs(V,{value:"ar-ledger",className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Upload AR Ledger"}),e.jsx(g,{children:"Upload your internal AR ledger – AI will extract the information and list them here"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",className:"gap-2",disabled:v.length===0,children:[e.jsx(B,{className:"size-4"}),"Export"]}),e.jsx(h,{className:"gap-2",onClick:()=>z.current?.click(),disabled:q,children:q?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"size-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"size-4"}),"Upload AR Ledger"]})}),e.jsx("input",{ref:z,type:"file",accept:".csv,.xlsx,.xls",onChange:Ce,className:"hidden"})]})]})}),e.jsx(m,{children:fe?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"size-8 animate-spin text-purple-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Loading AR ledger..."})]}):w?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-green-50 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(Y,{className:"size-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:w.fileName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[w.entryCount," entries • ",new Date(w.uploadedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-2",children:[e.jsx(ue,{className:"size-4"}),"View"]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-2 text-red-600 hover:text-red-700",children:[e.jsx(pe,{className:"size-4"}),"Delete"]})]})]})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Y,{className:"size-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"No AR ledger uploaded yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Upload your AR ledger to continue with reconciliation."})]})})]}),v.length>0&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(j,{children:"All AR Ledger Entries"}),e.jsxs(g,{children:[v.length," entries"]})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 pb-2 border-b border-gray-200 text-xs text-gray-500 sticky top-0 bg-white",children:[e.jsx("div",{children:"Date"}),e.jsx("div",{className:"col-span-2",children:"Description"}),e.jsx("div",{className:"text-right",children:"Amount"}),e.jsx("div",{className:"text-right",children:"Account"})]}),v.map(s=>e.jsxs("div",{className:"grid grid-cols-5 gap-4 py-2 text-sm border-b border-gray-100",children:[e.jsx("div",{className:"text-gray-900",children:s.date}),e.jsx("div",{className:"col-span-2 text-gray-900 truncate",children:s.description}),e.jsxs("div",{className:`text-right ${s.amount>=0?"text-green-600":"text-red-600"}`,children:["€",b(Math.abs(s.amount))]}),e.jsx("div",{className:"text-right text-gray-500 text-xs",children:s.account||"—"})]},s.id))]})})]})]}),e.jsx(V,{value:"reconciliation",className:"space-y-6",children:e.jsxs(d,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Run AR Reconciliation"}),e.jsx(g,{children:"Novalare will match customer transactions with AR ledger entries"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs(h,{variant:"outline",className:"gap-2",onClick:ze,children:[e.jsx(B,{className:"size-4"}),"Export Results"]}),e.jsx(h,{className:"gap-2",onClick:Se,disabled:ee||y.length===0||v.length===0,children:ee?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"size-4 animate-spin"}),"Reconciling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"size-4"}),"Run Reconciliation"]})})]})]})}),e.jsx(m,{children:y.length===0||v.length===0?e.jsxs(Te,{children:[e.jsx(P,{className:"size-4"}),e.jsx(_e,{children:"Please upload both customer statements and AR ledger before running reconciliation."})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(d,{className:"border-l-4 border-l-green-500",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Matched"}),e.jsx("p",{className:"text-3xl mt-1 text-gray-900",children:a.summary.matched_count}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.summary.match_rate.toFixed(1),"% match rate"]})]}),e.jsx(R,{className:"size-8 text-green-500"})]})})}),e.jsx(d,{className:"border-l-4 border-l-yellow-500",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unmatched Customer"}),e.jsx("p",{className:"text-3xl mt-1 text-gray-900",children:a.summary.unmatched_customer_count}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not in AR ledger"})]}),e.jsx(P,{className:"size-8 text-yellow-500"})]})})}),e.jsx(d,{className:"border-l-4 border-l-orange-500",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unmatched AR"}),e.jsx("p",{className:"text-3xl mt-1 text-gray-900",children:a.summary.unmatched_ar_count}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not in customer statements"})]}),e.jsx(ne,{className:"size-8 text-orange-500"})]})})}),e.jsx(d,{className:`border-l-4 ${Math.abs(a.summary.difference)<1?"border-l-green-500":"border-l-red-500"}`,children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("p",{className:`text-3xl mt-1 ${Math.abs(a.summary.difference)<1?"text-green-600":"text-red-600"}`,children:["€",b(Math.abs(a.summary.difference))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Math.abs(a.summary.difference)<1?"Balanced":"Out of balance"})]}),e.jsx(R,{className:`size-8 ${Math.abs(a.summary.difference)<1?"text-green-500":"text-red-500"}`})]})})})]}),a.matched_pairs.length>0&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(j,{className:"text-green-600",children:"Matched Transactions"}),e.jsxs(g,{children:[a.matched_pairs.length," successfully matched"]})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-3",children:[a.matched_pairs.slice(0,T?void 0:5).map((s,t)=>e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"size-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.customer_transaction.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.customer_transaction.date," • ",s.match_type]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:["€",b(s.customer_transaction.amount)]}),e.jsxs(ie,{variant:"outline",className:"text-xs mt-1",children:[s.match_confidence,"% confidence"]})]})]})},t)),a.matched_pairs.length>5&&e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ne(!T),className:"w-full",children:T?"Show Less":`Show All ${a.matched_pairs.length} Matches`})]})})]}),a.unmatched_customer.length>0&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(j,{className:"text-yellow-600",children:"Unmatched Customer Transactions"}),e.jsxs(g,{children:[a.unmatched_customer.length," transactions not found in AR ledger"]})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:a.unmatched_customer.map((s,t)=>e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"size-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.transaction.description}),e.jsx("p",{className:"text-xs text-gray-500",children:s.transaction.date}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:s.suggested_action})]})]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["€",b(s.transaction.amount)]})]})},t))})})]}),a.unmatched_ar.length>0&&e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(j,{className:"text-orange-600",children:"Unmatched AR Ledger Entries"}),e.jsxs(g,{children:[a.unmatched_ar.length," entries not found in customer statements"]})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:a.unmatched_ar.map((s,t)=>e.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"size-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.entry.description}),e.jsx("p",{className:"text-xs text-gray-500",children:s.entry.date}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s.reason})]})]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["€",b(s.entry.amount)]})]})},t))})})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(he,{className:"size-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Ready to reconcile."}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Run Reconciliation" to match transactions.'})]})})]})})]}):e.jsx(d,{children:e.jsxs(m,{className:"py-12 text-center text-gray-500",children:[e.jsx(ke,{className:"size-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Please select a company and period to get started."})]})})]})}export{os as ARReconciliation};
