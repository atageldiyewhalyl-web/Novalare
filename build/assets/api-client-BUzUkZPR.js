import{p as u,b as d}from"./index-DrBwAU1T.js";const m=`https://${u}.supabase.co/functions/v1/make-server-53c2e113`,p=!1,c={info:(...e)=>p,error:(...e)=>p,warn:(...e)=>p};async function t(e,a={}){const o=`${m}${e}`;try{const s=await fetch(o,{...a,headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json",...a.headers}});if(c.info(`ðŸ“¥ Response status: ${s.status} ${s.statusText}`),!s.ok){const n=await s.json().catch(()=>({error:"Network error"}));throw c.error(`âŒ API Error (${e}):`,n),new Error(n.error||`Request failed: ${s.statusText}`)}const r=await s.json();if(!r.success)throw c.error(`âŒ API Request failed (${e}):`,r.error),new Error(r.error||"Request failed");return c.info(`âœ… API Success (${e})`),r.data}catch(s){throw s}}const h={getAll:()=>t("/api/companies"),getById:e=>t(`/api/companies/${e}`),create:e=>t("/api/companies",{method:"POST",body:JSON.stringify(e)}),update:(e,a)=>t(`/api/companies/${e}`,{method:"PUT",body:JSON.stringify(a)}),delete:e=>t(`/api/companies/${e}`,{method:"DELETE"})},$={getByCompany:e=>t(`/api/companies/${e}/documents`),create:(e,a)=>t(`/api/companies/${e}/documents`,{method:"POST",body:JSON.stringify(a)}),delete:(e,a)=>t(`/api/companies/${e}/documents/${a}`,{method:"DELETE"}),uploadFile:async(e,a)=>{const o=new FormData;o.append("file",a);const s=`${m}/api/companies/${e}/upload-file`,r=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:o});if(!r.ok){const i=await r.json().catch(()=>({error:"Upload failed"}));throw new Error(i.error||"File upload failed")}return(await r.json()).data.fileUrl}},l={getByCompany:e=>t(`/api/companies/${e}/activities`),create:(e,a)=>t(`/api/companies/${e}/activities`,{method:"POST",body:JSON.stringify(a)})},f={getByCompany:e=>t(`/api/companies/${e}/invoices`),create:(e,a)=>t(`/api/companies/${e}/invoices`,{method:"POST",body:JSON.stringify(a)}),update:(e,a,o)=>t(`/api/companies/${e}/invoices/${a}`,{method:"PUT",body:JSON.stringify(o)}),delete:(e,a)=>t(`/api/companies/${e}/invoices/${a}`,{method:"DELETE"})},g={getByCompany:e=>t(`/api/companies/${e}/receipts`),create:(e,a)=>t(`/api/companies/${e}/receipts`,{method:"POST",body:JSON.stringify(a)}),update:(e,a,o)=>t(`/api/companies/${e}/receipts/${a}`,{method:"PUT",body:JSON.stringify(o)}),delete:(e,a)=>t(`/api/companies/${e}/receipts/${a}`,{method:"DELETE"})},w={getDashboard:()=>t("/api/metrics/dashboard"),getCompany:e=>t(`/api/metrics/company/${e}`)},b={get:()=>t("/api/settings"),update:e=>t("/api/settings",{method:"PUT",body:JSON.stringify(e)})},E={getByCompany:e=>t(`/api/companies/${e}/emails`),parseEmail:async(e,a)=>{const o=new FormData;o.append("from",a.from),o.append("subject",a.subject),o.append("body",a.body),a.attachments.forEach(i=>{o.append("attachments",i)});const s=`${m}/api/companies/${e}/emails/parse`,r=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:o});if(!r.ok){const i=await r.json().catch(()=>({error:"Failed to parse email"}));throw new Error(i.error||"Failed to parse email")}return(await r.json()).data}};export{l as a,h as c,$ as d,E as e,f as i,w as m,g as r,b as s};
