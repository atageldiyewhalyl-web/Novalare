import{r as x,j as e,I as _,z,a as y,k as B,D as R}from"./index-DrBwAU1T.js";import{C as h,b as j,c as v,a as f}from"./card-Cmu1fk5m.js";import{B as C}from"./badge-BVkw5bJj.js";import{s as T,c as V}from"./api-client-BUzUkZPR.js";import{B as F}from"./building-Cu8HYSb7.js";import{C as O}from"./DevPortal--LMNXygJ.js";function k(s,t=[]){let l=[];function o(d,c){const n=x.createContext(c);n.displayName=d+"Context";const i=l.length;l=[...l,c];const u=p=>{const{scope:r,children:m,...g}=p,P=r?.[s]?.[i]||n,L=x.useMemo(()=>g,Object.values(g));return e.jsx(P.Provider,{value:L,children:m})};u.displayName=d+"Provider";function N(p,r){const m=r?.[s]?.[i]||n,g=x.useContext(m);if(g)return g;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${d}\``)}return[u,N]}const a=()=>{const d=l.map(c=>x.createContext(c));return function(n){const i=n?.[s]||d;return x.useMemo(()=>({[`__scope${s}`]:{...n,[s]:i}}),[n,i])}};return a.scopeName=s,[o,H(a,...t)]}function H(...s){const t=s[0];if(s.length===1)return t;const l=()=>{const o=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(d){const c=o.reduce((n,{useScope:i,scopeName:u})=>{const p=i(d)[`__scope${u}`];return{...n,...p}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return l.scopeName=t.scopeName,l}var G=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],D=G.reduce((s,t)=>{const l=_(`Primitive.${t}`),o=x.forwardRef((a,d)=>{const{asChild:c,...n}=a,i=c?l:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(i,{...n,ref:d})});return o.displayName=`Primitive.${t}`,{...s,[t]:o}},{}),w="Progress",S=100,[X]=k(w),[J,Y]=X(w),E=x.forwardRef((s,t)=>{const{__scopeProgress:l,value:o=null,max:a,getValueLabel:d=q,...c}=s;(a||a===0)&&!$(a)&&console.error(K(`${a}`,"Progress"));const n=$(a)?a:S;o!==null&&!A(o,n)&&console.error(Q(`${o}`,"Progress"));const i=A(o,n)?o:null,u=b(i)?d(i,n):void 0;return e.jsx(J,{scope:l,value:i,max:n,children:e.jsx(D.div,{"aria-valuemax":n,"aria-valuemin":0,"aria-valuenow":b(i)?i:void 0,"aria-valuetext":u,role:"progressbar","data-state":I(i,n),"data-value":i??void 0,"data-max":n,...c,ref:t})})});E.displayName=w;var M="ProgressIndicator",U=x.forwardRef((s,t)=>{const{__scopeProgress:l,...o}=s,a=Y(M,l);return e.jsx(D.div,{"data-state":I(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...o,ref:t})});U.displayName=M;function q(s,t){return`${Math.round(s/t*100)}%`}function I(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function b(s){return typeof s=="number"}function $(s){return b(s)&&!isNaN(s)&&s>0}function A(s,t){return b(s)&&!isNaN(s)&&s<=t&&s>=0}function K(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${S}\`.`}function Q(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${S} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var W=E,Z=U;function ee({className:s,value:t,...l}){return e.jsx(W,{"data-slot":"progress",className:z("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...l,children:e.jsx(Z,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function le(){const[s,t]=x.useState(null),[l,o]=x.useState([]),[a,d]=x.useState(!0),[c,n]=x.useState(null);x.useEffect(()=>{i()},[]);const i=async()=>{try{d(!0),n(null);const[r,m]=await Promise.all([T.get(),V.getAll()]);t(r),o(m)}catch(r){console.error("Failed to load settings:",r),n(r instanceof Error?r.message:"Failed to load data")}finally{d(!1)}};if(a)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})});if(c||!s)return e.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("p",{className:"text-red-600",children:["Error: ",c||"Failed to load settings"]}),e.jsx(y,{onClick:i,variant:"outline",className:"mt-4",children:"Retry"})]});const u=l.filter(r=>r.status==="Active"),N=u.length/s.companyLimit*100,p=[{name:"Starter",price:"€49",companies:"5",features:["Up to 5 companies","Unlimited documents","3 team members","Email support"],current:!1},{name:"Pro",price:"€149",companies:"20",features:["Up to 20 companies","Unlimited documents","10 team members","Priority support"],current:s.plan==="Pro"},{name:"Scale",price:"€349",companies:"50",features:["Up to 50 companies","Unlimited documents","Unlimited team members","24/7 support"],current:!1}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl text-gray-900",children:"Settings & Billing"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your plan, billing, and company limits"})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(v,{children:"Current Plan"})}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-2xl text-gray-900",children:[s.plan," Plan"]}),e.jsx(C,{variant:"secondary",className:"bg-blue-100 text-blue-700 text-xs",children:"Active"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["€",s.price,"/",s.billingCycle]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Next billing date: ",new Date(s.nextBillingDate).toLocaleDateString()]})]}),e.jsx(y,{variant:"outline",size:"sm",children:"Change Plan"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Company Limit"}),e.jsx("p",{className:"text-2xl text-gray-900",children:s.companyLimit}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active companies allowed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Document Processing"}),e.jsx("p",{className:"text-2xl text-gray-900",children:"Unlimited"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Documents per month"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Team Members"}),e.jsx("p",{className:"text-2xl text-gray-900",children:"10"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"User seats included"})]})]})})]})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(v,{children:"Company Usage"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"size-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-900",children:"Active Companies"})]}),e.jsxs("span",{className:"text-sm text-gray-900",children:[u.length," of ",s.companyLimit]})]}),e.jsx(ee,{value:N,className:"h-2"})]}),N>80&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(B,{className:"size-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs text-gray-900 mb-1",children:["You're using ",u.length," of ",s.companyLimit," company slots"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Consider upgrading to Scale plan for up to 50 companies, or archive inactive companies to free up slots."})]})]})]})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(v,{children:"Usage This Month"})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"Documents Processed"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Across all companies"})]}),e.jsx("p",{className:"text-2xl text-gray-900",children:l.reduce((r,m)=>r+(m.docsThisMonth||0),0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"API Calls"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Automation runs"})]}),e.jsx("p",{className:"text-2xl text-gray-900",children:"1,247"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"AI Processing Cost"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Internal tracking only"})]}),e.jsx("p",{className:"text-2xl text-gray-900",children:"€142"})]})]})})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(v,{children:"Available Plans"})}),e.jsx(f,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:p.map((r,m)=>e.jsxs("div",{className:`p-6 border-2 rounded-lg ${r.current?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg text-gray-900",children:r.name}),r.current&&e.jsx(C,{variant:"secondary",className:"bg-blue-100 text-blue-700 text-xs",children:"Current"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-3xl text-gray-900",children:r.price}),e.jsx("span",{className:"text-sm text-gray-600",children:"/month"})]}),e.jsx("ul",{className:"space-y-2 mb-6",children:r.features.map((g,P)=>e.jsxs("li",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"size-1.5 rounded-full bg-blue-600"}),g]},P))}),e.jsx(y,{variant:r.current?"secondary":"outline",className:"w-full h-9 text-sm",disabled:r.current,children:r.current?"Current Plan":"Upgrade"})]},m))})})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(v,{children:"Payment Method"})}),e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{className:"size-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:"•••• •••• •••• 4242"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expires 12/2025"})]})]}),e.jsx(y,{variant:"outline",size:"sm",children:"Update"})]})})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(v,{children:"Billing History"})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-3",children:[{date:"Mar 1, 2024",amount:`€${s.price}.00`,status:"Paid"},{date:"Feb 1, 2024",amount:`€${s.price}.00`,status:"Paid"},{date:"Jan 1, 2024",amount:`€${s.price}.00`,status:"Paid"}].map((r,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:r.date}),e.jsx("p",{className:"text-xs text-gray-500",children:r.amount})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{variant:"secondary",className:"bg-green-100 text-green-700 text-xs",children:r.status}),e.jsxs(y,{variant:"ghost",size:"sm",className:"h-8 gap-2",children:[e.jsx(R,{className:"size-3"}),e.jsx("span",{className:"text-xs",children:"Download"})]})]})]},m))})})]})]})}export{le as Settings};
