import{r as o,j as e,a as u,a1 as f,t as A}from"./index-DrBwAU1T.js";import{D as N,a as D,b as F,c as I,d as R,e as E}from"./dialog-vf0qvQXb.js";import{L as l}from"./label-BCNN39XH.js";import{S as m,a as x,b as g,c as p,d as s}from"./select-BpfYsr0G.js";import{c as O}from"./api-client-BUzUkZPR.js";import{P as K}from"./plus-B8Ewa_Kr.js";function L({onSuccess:j,trigger:C}){const[S,d]=o.useState(!1),[n,y]=o.useState(!1),[v,i]=o.useState(null),[a,c]=o.useState({name:"",country:"DE",chartOfAccounts:"SKR03",status:"Active",tags:""}),b=async t=>{if(t.preventDefault(),!a.name.trim()){i("Company name is required");return}if(!a.chartOfAccounts){i("Chart of Accounts is required");return}try{y(!0),i(null);const r=a.tags.split(",").map(h=>h.trim()).filter(h=>h.length>0);await O.create({name:a.name.trim(),country:a.country,chartOfAccounts:a.chartOfAccounts,status:a.status,tags:r.length>0?r:void 0,docsThisMonth:0,lastActivity:"Just now"}),A.success(`${a.name.trim()} created successfully!`),c({name:"",country:"DE",chartOfAccounts:"SKR03",status:"Active",tags:""}),d(!1),j&&j()}catch(r){console.error("Failed to create company:",r),i(r instanceof Error?r.message:"Failed to create company"),A.error(r instanceof Error?r.message:"Failed to create company")}finally{y(!1)}};return e.jsxs(N,{open:S,onOpenChange:d,children:[e.jsx(D,{asChild:!0,children:C||e.jsxs(u,{className:"gap-2 h-10 bg-gray-900 hover:bg-gray-800",children:[e.jsx(K,{className:"size-4"}),e.jsx("span",{className:"text-sm",children:"Add Company"})]})}),e.jsxs(F,{className:"sm:max-w-[500px]",children:[e.jsxs(I,{children:[e.jsx(R,{children:"Add New Company"}),e.jsx(E,{children:"Enter the company details below to add a new company to the system."})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Company Name *"}),e.jsx(f,{id:"name",placeholder:"e.g., ACME Corporation GmbH",value:a.name,onChange:t=>c({...a,name:t.target.value}),disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"country",children:"Country"}),e.jsxs(m,{value:a.country,onValueChange:t=>c({...a,country:t}),disabled:n,children:[e.jsx(x,{id:"country",children:e.jsx(g,{})}),e.jsxs(p,{children:[e.jsx(s,{value:"DE",children:"Germany (DE)"}),e.jsx(s,{value:"US",children:"United States (US)"}),e.jsx(s,{value:"UK",children:"United Kingdom (UK)"}),e.jsx(s,{value:"FR",children:"France (FR)"}),e.jsx(s,{value:"ES",children:"Spain (ES)"}),e.jsx(s,{value:"IT",children:"Italy (IT)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"chartOfAccounts",children:"Chart of Accounts *"}),e.jsxs(m,{value:a.chartOfAccounts,onValueChange:t=>c({...a,chartOfAccounts:t}),disabled:n,children:[e.jsx(x,{id:"chartOfAccounts",children:e.jsx(g,{})}),e.jsxs(p,{children:[e.jsx(s,{value:"SKR03",children:"SKR03 - Standard Chart of Accounts (Process Industry)"}),e.jsx(s,{value:"SKR04",children:"SKR04 - Standard Chart of Accounts (Cost Accounting)"}),e.jsx(s,{value:"IKR",children:"IKR - Industrial Chart of Accounts"}),e.jsx(s,{value:"IFRS",children:"IFRS - International Financial Reporting Standards"}),e.jsx(s,{value:"GAAP",children:"GAAP - Generally Accepted Accounting Principles"}),e.jsx(s,{value:"Custom",children:"Custom - User-defined Chart of Accounts"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select the accounting standard used by this company. You can change this later in company settings."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"status",children:"Status"}),e.jsxs(m,{value:a.status,onValueChange:t=>c({...a,status:t}),disabled:n,children:[e.jsx(x,{id:"status",children:e.jsx(g,{})}),e.jsxs(p,{children:[e.jsx(s,{value:"Active",children:"Active"}),e.jsx(s,{value:"Inactive",children:"Inactive"}),e.jsx(s,{value:"Archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(f,{id:"tags",placeholder:"e.g., Tech, Startup, VAT",value:a.tags,onChange:t=>c({...a,tags:t.target.value}),disabled:n}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional: Add tags to categorize the company"})]}),v&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:v})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:n,children:"Cancel"}),e.jsx(u,{type:"submit",disabled:n,className:"bg-gray-900 hover:bg-gray-800",children:n?"Creating...":"Create Company"})]})]})]})]})}export{L as A};
