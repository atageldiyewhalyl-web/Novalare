import{c as S,E as M,r as a,j as e,a as o,l as E,a0 as L,t as i}from"./index-DrBwAU1T.js";import{C as F,a as B}from"./card-Cmu1fk5m.js";import{B as f}from"./badge-BVkw5bJj.js";import{c as m,s as I}from"./api-client-BUzUkZPR.js";import{A as O}from"./AddCompanyDialog-DEyf6AM7.js";import{D as P,a as R,b as _,c as p,d as $}from"./DevPortal--LMNXygJ.js";import{E as H,A as U,a as Y,b as q,c as G,d as J,e as K,f as Q,g as V}from"./alert-dialog-CCoop3_z.js";import{B as N}from"./building-Cu8HYSb7.js";import{T as W}from"./trash-2-CxXCVqKn.js";import"./dialog-vf0qvQXb.js";import"./label-BCNN39XH.js";import"./select-BpfYsr0G.js";import"./index-BSRUjdZ4.js";import"./plus-B8Ewa_Kr.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Z=S("ellipsis",X);function ue({onNavigate:v}){const{theme:t}=M(),[x,k]=a.useState([]),[u,w]=a.useState(null),[D,h]=a.useState(!0),[g,j]=a.useState(null),[A,n]=a.useState(!1),[r,b]=a.useState(null),[c,y]=a.useState(!1);a.useEffect(()=>{l()},[]);const l=async()=>{try{h(!0),j(null);const[s,d]=await Promise.all([m.getAll(),I.get()]);k(s),w(d)}catch(s){console.error("Failed to load companies:",s),j(s instanceof Error?s.message:"Failed to load data")}finally{h(!1)}},C=async s=>{try{await m.update(s.id,{status:"Archived"}),i.success(`${s.name} has been archived`),l()}catch(d){console.error("Failed to archive company:",d),i.error("Failed to archive company")}},z=async()=>{if(r){y(!0);try{await m.delete(r.id),i.success(`${r.name} has been deleted`),l()}catch(s){console.error("Failed to delete company:",s),i.error("Failed to delete company")}finally{y(!1),n(!1),b(null)}}};if(D)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:t==="premium-dark"?"w-12 h-12 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto mb-4":"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:t==="premium-dark"?"text-purple-200":"text-gray-600",children:"Loading companies..."})]})});if(g)return e.jsxs("div",{className:t==="premium-dark"?"p-6 bg-red-900/20 border border-red-500/30 rounded-lg":"p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("p",{className:t==="premium-dark"?"text-red-400":"text-red-600",children:["Error: ",g]}),e.jsx(o,{onClick:l,variant:"outline",className:"mt-4",children:"Retry"})]});const T=x.filter(s=>s.status==="Active");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:t==="premium-dark"?"text-3xl text-white":"text-3xl text-gray-900",children:"Companies"}),e.jsx("p",{className:t==="premium-dark"?"text-purple-200 mt-1":"text-gray-500 mt-1",children:"Manage your client companies"})]}),e.jsx(O,{onSuccess:l})]}),e.jsx(F,{className:t==="premium-dark"?"bg-gray-900/50 border-purple-500/20":"",children:e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:t==="premium-dark"?"border-b border-purple-500/20 bg-gray-900/80":"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:t==="premium-dark"?"text-left py-4 px-6 text-purple-200 text-sm":"text-left py-4 px-6 text-gray-600 text-sm",children:"Company Name"}),e.jsx("th",{className:t==="premium-dark"?"text-left py-4 px-6 text-purple-200 text-sm":"text-left py-4 px-6 text-gray-600 text-sm",children:"Country"}),e.jsx("th",{className:t==="premium-dark"?"text-left py-4 px-6 text-purple-200 text-sm":"text-left py-4 px-6 text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:t==="premium-dark"?"text-left py-4 px-6 text-purple-200 text-sm":"text-left py-4 px-6 text-gray-600 text-sm",children:"Documents This Month"}),e.jsx("th",{className:t==="premium-dark"?"text-left py-4 px-6 text-purple-200 text-sm":"text-left py-4 px-6 text-gray-600 text-sm",children:"Last Activity"}),e.jsx("th",{className:t==="premium-dark"?"text-left py-4 px-6 text-purple-200 text-sm":"text-left py-4 px-6 text-gray-600 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:t==="premium-dark"?"border-b border-purple-500/10 hover:bg-purple-500/5 transition-colors":"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:t==="premium-dark"?"size-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center":"size-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(N,{className:"size-5 text-white"})}),e.jsx("span",{className:t==="premium-dark"?"text-sm text-white":"text-sm text-gray-900",children:s.name})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(f,{variant:"outline",className:t==="premium-dark"?"text-xs border-purple-500/30 text-purple-200":"text-xs",children:s.country})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(f,{variant:"secondary",className:t==="premium-dark"?"bg-green-500/20 text-green-400 text-xs border border-green-500/30":"bg-green-100 text-green-700 text-xs",children:s.status})}),e.jsx("td",{className:t==="premium-dark"?"py-4 px-6 text-sm text-white":"py-4 px-6 text-sm text-gray-900",children:s.docsThisMonth?.toLocaleString()||0}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:t==="premium-dark"?"flex items-center gap-2 text-purple-300":"flex items-center gap-2 text-gray-600",children:[e.jsx(E,{className:"size-4"}),e.jsx("span",{className:"text-sm",children:s.lastActivity})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs(P,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(o,{variant:"ghost",size:"sm",className:t==="premium-dark"?"h-8 w-8 p-0 text-purple-200 hover:text-white hover:bg-purple-500/10":"h-8 w-8 p-0",children:[e.jsx(Z,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Actions"})]})}),e.jsxs(_,{align:"end",className:t==="premium-dark"?"w-48 bg-gray-900 border-purple-500/20":"w-48",children:[e.jsxs(p,{onClick:()=>v("company",{companyId:s.id}),className:t==="premium-dark"?"text-purple-200 hover:bg-purple-500/10 hover:text-white focus:bg-purple-500/10 focus:text-white":"",children:[e.jsx(H,{className:"size-4 mr-2"}),"Open"]}),s.status!=="Archived"&&e.jsxs(p,{onClick:()=>C(s),className:t==="premium-dark"?"text-purple-200 hover:bg-purple-500/10 hover:text-white focus:bg-purple-500/10 focus:text-white":"",children:[e.jsx(L,{className:"size-4 mr-2"}),"Archive"]}),e.jsx($,{className:t==="premium-dark"?"bg-purple-500/20":""}),e.jsxs(p,{onClick:()=>{b(s),n(!0)},className:"text-red-600 focus:text-red-600",children:[e.jsx(W,{className:"size-4 mr-2"}),"Delete"]})]})]})})]},s.id))})]})})})}),e.jsxs("div",{className:t==="premium-dark"?"flex items-center justify-between p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg":"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:t==="premium-dark"?"size-10 rounded-full bg-purple-500/20 flex items-center justify-center":"size-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(N,{className:t==="premium-dark"?"size-5 text-purple-400":"size-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:t==="premium-dark"?"text-sm text-white":"text-sm text-gray-900",children:["You're using ",T.length," of ",u?.companyLimit||20," company slots"]}),e.jsxs("p",{className:t==="premium-dark"?"text-xs text-purple-300":"text-xs text-gray-600",children:["on your ",u?.plan||"Pro"," plan"]})]})]}),e.jsx(o,{variant:"outline",size:"sm",className:t==="premium-dark"?"border-purple-500/30 text-purple-200 hover:bg-purple-500/10 hover:text-white":"",children:"Upgrade Plan"})]}),e.jsx(U,{open:A,onOpenChange:n,children:e.jsxs(Y,{children:[e.jsxs(q,{children:[e.jsxs(G,{children:["Delete ",r?.name,"?"]}),e.jsxs(J,{children:["This action cannot be undone. This will permanently delete ",e.jsx("strong",{children:r?.name})," and all associated data from your account.",r?.docsThisMonth&&r.docsThisMonth>0&&e.jsxs("span",{className:"block mt-2 text-amber-600",children:["⚠️ This company has ",r.docsThisMonth," documents this month."]})]})]}),e.jsxs(K,{children:[e.jsx(Q,{disabled:c,children:"Cancel"}),e.jsx(V,{onClick:z,disabled:c,className:"bg-red-600 hover:bg-red-700",children:c?"Deleting...":"Delete Company"})]})]})})]})}export{ue as CompaniesList};
